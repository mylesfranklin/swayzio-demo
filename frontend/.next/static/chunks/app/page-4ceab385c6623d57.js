(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4008:function(e,n,t){Promise.resolve().then(t.bind(t,1934))},1934:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var a=t(587),s=t(5587);function r(e){let{onFile:n,loading:t}=e,r=(0,s.useRef)(null),[l,i]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"w-full max-w-xl border-2 border-dashed rounded-lg p-8 flex flex-col items-center justify-center transition-colors\n        ".concat(l?"border-brand-accent bg-brand-bg2":"border-brand-border bg-brand-bg2","\n        ").concat(t?"opacity-60 pointer-events-none":"","\n      "),onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:e=>{e.preventDefault(),i(!1)},onDrop:e=>{var t;e.preventDefault(),i(!1);let a=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];a&&n(a)},onClick:()=>{var e;return!t&&(null===(e=r.current)||void 0===e?void 0:e.click())},style:{cursor:t?"not-allowed":"pointer"},children:[(0,a.jsx)("input",{ref:r,type:"file",accept:".wav,.mp3,audio/*",className:"hidden",disabled:t,onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&n(a)}}),(0,a.jsx)("span",{className:"text-brand-text2 text-lg",children:t?"Analyzing...":"Click or drop an audio file"})]})}let l={genre:"bg-brand-accent hover:bg-brand-accentHv",mood:"bg-brand-accent hover:bg-brand-accentHv",key:"bg-brand-button",bpm:"bg-brand-button",energy:"bg-brand-button",valence:"bg-brand-button"};function i(e){let{label:n,type:t}=e;return(0,a.jsx)("span",{className:"inline-block rounded-full px-3 py-1 text-sm font-semibold text-brand-text2 mr-2 mb-2 transition-colors cursor-default\n        ".concat(l[t]||"bg-brand-bg2","\n      "),children:n})}var o=t(6015),c=t(8275);function d(e){let{instruments:n}=e,t=Math.max(...n.map(e=>e.timeline.length),1),s=Array.from({length:t},(e,n)=>n+1);return(0,a.jsx)(o.$Q,{data:{labels:s,datasets:n.map((e,n)=>({label:e.name,data:e.timeline,backgroundColor:void 0}))},options:{responsive:!0,plugins:{legend:{display:!0,labels:{color:"#fff"}},title:{display:!1}},scales:{x:{ticks:{color:"#94A3B8"},grid:{color:"#222"}},y:{ticks:{color:"#94A3B8"},grid:{color:"#222"}}}}})}function b(e){let{curve:n}=e,t=n.map((e,n)=>n+1);return(0,a.jsx)(o.x1,{data:{labels:t,datasets:[{label:"Energy",data:n,borderColor:"#F26207",backgroundColor:"rgba(242,98,7,0.2)",tension:.2}]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{ticks:{color:"#94A3B8"},grid:{color:"#222"}},y:{ticks:{color:"#94A3B8"},grid:{color:"#222"}}}}})}function m(){let[e,n]=(0,s.useState)(null),[t,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),m=async e=>{l(!0),c(null),n(null);let t=new FormData;t.append("file",e);try{let e=await fetch("/api/analyze",{method:"POST",body:t});if(413===e.status){c("File too large (max 15 MB)"),l(!1);return}if(!e.ok){c("Analysis failed"),l(!1);return}let a=await e.json();n(a)}catch(e){c("Network error")}finally{l(!1)}};return(0,a.jsxs)("main",{className:"min-h-screen bg-brand-bg text-brand-text flex flex-col items-center px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Swayzio AI‑Tagging Demo"}),(0,a.jsx)("p",{className:"mb-6 text-brand-text2",children:"Drag & drop a .wav or .mp3 file (≤15MB) to analyze."}),(0,a.jsx)(r,{onFile:m,loading:t}),o&&(0,a.jsx)("div",{className:"mt-4 text-red-400",children:o}),e&&(0,a.jsxs)("section",{className:"w-full max-w-2xl mt-8 space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.tags.genre.map((e,n)=>(0,a.jsx)(i,{label:e,type:"genre"},"genre-".concat(n))),e.tags.moods.map((e,n)=>(0,a.jsx)(i,{label:e,type:"mood"},"mood-".concat(n))),(0,a.jsx)(i,{label:e.tags.key,type:"key"}),(0,a.jsx)(i,{label:e.tags.bpm+" BPM",type:"bpm"}),(0,a.jsx)(i,{label:"Energy: ".concat(e.tags.energy.toFixed(2)),type:"energy"}),(0,a.jsx)(i,{label:"Valence: ".concat(e.tags.valence.toFixed(2)),type:"valence"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Instrument Timeline"}),(0,a.jsx)(d,{instruments:e.instruments})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Energy Over Time"}),(0,a.jsx)(b,{curve:e.energy_curve})]}),(0,a.jsxs)("div",{className:"bg-brand-bg2 rounded p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Music Theory"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Chords:"})," ",e.music_theory.chords.join(", ")]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Sections:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:e.music_theory.sections.map((e,n)=>(0,a.jsxs)("li",{children:[e.label," (",e.start.toFixed(1),"s – ",e.end.toFixed(1),"s)"]},n))})]})]}),(0,a.jsxs)("details",{className:"bg-brand-bg2 rounded p-4",open:!0,children:[(0,a.jsxs)("summary",{className:"cursor-pointer text-lg font-semibold",children:["Lyrics Transcript ",e.lyrics.profanity&&(0,a.jsx)("span",{className:"ml-2 text-red-400",children:"⚠️ Profanity"})]}),(0,a.jsx)("pre",{className:"mt-2 whitespace-pre-wrap text-brand-text2",children:e.lyrics.transcript||"No lyrics detected."})]})]})]})}c.kL.register(c.uw,c.f$,c.ZL,c.Dx,c.u,c.De),c.kL.register(c.uw,c.f$,c.od,c.jn,c.Dx,c.u,c.De)}},function(e){e.O(0,[20,355,399,258,744],function(){return e(e.s=4008)}),_N_E=e.O()}]);